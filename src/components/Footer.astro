---
import {
    Instagram,
    Youtube,
    Facebook,
    Phone,
    Mail,
    MapPin,
    ArrowRight,
} from "lucide-astro";
import iconOnly from "../assets/icon_only.png";
import oppluxLogoFullColor from "../assets/opplux_fullcolor.png";
import { supabase } from "../lib/supabase";

// Fetch categories for the footer
const { data: categories, error } = await supabase
    .from("product_categories")
    .select("name, slug")
    .order("position", { ascending: true });

if (error) {
    console.error("Error fetching categories for footer:", error);
}
---

<footer class="bg-white text-zinc-900 xl:py-20 py-10 border-t border-zinc-100">
    <div class="container mx-auto px-6">
        <div class="flex flex-col xl:flex-row justify-between gap-12 mb-16">
            <!-- Column 1: Logo & Description -->
            <div
                class="space-y-8 xl:max-w-xs border-b border-zinc-100 xl:pb-12 pb-4 xl:border-b-0 xl:pb-0"
            >
                <div>
                    <div class="flex items-center gap-2 mb-6">
                        <img
                            src={oppluxLogoFullColor.src}
                            alt="Opplux Logo"
                            class="h-10 w-auto object-contain"
                        />
                    </div>
                    <p class="text-zinc-500 text-sm leading-relaxed">
                        Líderes en soluciones de energía solar y alumbrado
                        público sustentable. Iluminando el futuro de México con
                        tecnología de vanguardia.
                    </p>
                </div>

                <div
                    class="hidden xl:block space-y-4 pt-4 border-t border-zinc-50"
                >
                    <div class="flex gap-3 mt-4 lg:mt-0">
                        <MapPin
                            class="w-4 h-4 text-[#FF8351] shrink-0 mt-0.5"
                        />
                        <p class="text-zinc-500 text-xs leading-relaxed">
                            Monterrey, Nuevo León
                        </p>
                    </div>
                    <div class="flex items-center gap-3">
                        <Phone class="w-4 h-4 text-[#FF8351] shrink-0" />
                        <a
                            href="tel:+5218123773237"
                            class="text-zinc-500 text-xs hover:text-black transition-colors"
                            >+52 81 2377 3237</a
                        >
                    </div>
                </div>
            </div>

            <!-- Right Columns Group -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                <!-- Column 2: Products -->
                <div>
                    <h4
                        class="font-bold text-sm uppercase tracking-widest mb-3 lg:mb-8 text-zinc-400"
                    >
                        Productos
                    </h4>
                    <ul class="space-y-4">
                        {
                            categories?.map((category) => (
                                <li>
                                    <a
                                        href={`/productos/${category.slug}`}
                                        class="text-zinc-600 text-sm hover:text-[#FF8351] transition-colors"
                                    >
                                        {category.name}
                                    </a>
                                </li>
                            ))
                        }
                    </ul>
                </div>

                <!-- Column 3: Social Media -->
                <div>
                    <h4
                        class="font-bold text-sm uppercase tracking-widest mb-3 lg:mb-8 text-zinc-400"
                    >
                        Redes Sociales
                    </h4>
                    <ul class="space-y-4">
                        <li>
                            <a
                                href="https://www.instagram.com/opplux_mx?igsh=YWJkYnhhcHVzc2E5"
                                class="flex items-center gap-3 text-zinc-600 text-sm hover:text-[#FF8351] transition-colors"
                            >
                                <Instagram class="w-5 h-5" />
                                <span>Instagram</span>
                            </a>
                        </li>
                        <li>
                            <a
                                href="https://www.youtube.com/channel/UC6xTAsB4nMyxLiEXIXUVy3w"
                                class="flex items-center gap-3 text-zinc-600 text-sm hover:text-[#FF8351] transition-colors"
                            >
                                <Youtube class="w-5 h-5" />
                                <span>Youtube</span>
                            </a>
                        </li>
                        <li>
                            <a
                                href="https://www.facebook.com/people/OPPlux-Luminarias-M%C3%A9xico/61584469463565/#"
                                class="flex items-center gap-3 text-zinc-600 text-sm hover:text-[#FF8351] transition-colors"
                            >
                                <Facebook class="w-5 h-5" />
                                <span>Facebook</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Column 4: Contact -->
                <div>
                    <h4
                        class="font-bold text-sm uppercase tracking-widest mb-3 lg:mb-8 text-zinc-400"
                    >
                        Contacto
                    </h4>
                    <ul class="space-y-4">
                        <li>
                            <a
                                href="https://wa.me/528123773237"
                                class="flex items-center gap-3 text-zinc-600 text-sm hover:text-[#FF8351] transition-colors group"
                            >
                                <span>WhatsApp Directo</span>
                                <ArrowRight
                                    class="w-4 h-4 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all"
                                />
                            </a>
                        </li>
                        <li>
                            <a
                                href="/cotizacion"
                                class="flex items-center gap-3 text-zinc-600 text-sm hover:text-[#FF8351] transition-colors group font-bold"
                            >
                                <span>Solicitar Cotización</span>
                                <ArrowRight
                                    class="w-4 h-4 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all"
                                />
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Mobile/Tablet Address & Phone (Below link columns, hidden on xl+) -->
        <div class="xl:hidden space-y-6 pt-12 border-t border-zinc-100 mb-16">
            <div class="flex gap-4">
                <MapPin class="w-6 h-6 text-[#FF8351] shrink-0 mt-1" />
                <div>
                    <p
                        class="text-zinc-900 font-bold text-sm uppercase tracking-widest mb-2"
                    >
                        Ubicación
                    </p>
                    <p class="text-zinc-600 text-base leading-relaxed">
                        Monterrey, Nuevo León
                    </p>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <Phone class="w-6 h-6 text-[#FF8351] shrink-0" />
                <div>
                    <p
                        class="text-zinc-900 font-bold text-sm uppercase tracking-widest mb-1"
                    >
                        Teléfono
                    </p>
                    <a
                        href="tel:+5218123773237"
                        class="text-zinc-600 text-base hover:text-[#FF8351] transition-colors"
                        >+52 81 2377 3237</a
                    >
                </div>
            </div>
        </div>

        <!-- Bottom Bar -->
        <div
            class="pt-8 border-t border-zinc-100 flex flex-col md:flex-row justify-between items-center gap-4"
        >
            <p class="text-xs text-zinc-400">
                © 2026 Oppus Global. Todos los derechos reservados.
            </p>
        </div>
    </div>
</footer>
